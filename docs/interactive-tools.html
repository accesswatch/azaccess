<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Interactive Tools | Accessibility at Arizona</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="scripts/alt-text-data.js" defer></script>
    <script src="scripts/alt-text-engine.js" defer></script>
    <script src="../../scripts/header.js" defer></script>
    <style>
      .tool-section {
        background: #fff;
        border: 1px solid #e0e0e0;
        border-radius: 12px;
        padding: 2rem;
        margin: 2rem 0;
      }
      .tool-section h3 {
        margin-top: 0;
        color: #1565c0;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }
      /* Contrast Checker */
      .contrast-inputs {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1.5rem;
        margin: 1.5rem 0;
      }
      @media (max-width: 600px) {
        .contrast-inputs {
          grid-template-columns: 1fr;
        }
      }
      .color-input-group {
        background: #f5f5f5;
        padding: 1.25rem;
        border-radius: 8px;
      }
      .color-input-group label {
        display: block;
        font-weight: 600;
        margin-bottom: 0.75rem;
      }
      .color-picker-row {
        display: flex;
        gap: 0.75rem;
        align-items: center;
      }
      .color-picker-row input[type="color"] {
        width: 60px;
        height: 40px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }
      .color-picker-row input[type="text"] {
        flex: 1;
        padding: 0.5rem;
        font-family: monospace;
        font-size: 1rem;
        border: 1px solid #ddd;
        border-radius: 4px;
      }
      .contrast-preview {
        padding: 2rem;
        border-radius: 8px;
        text-align: center;
        margin: 1.5rem 0;
        transition: all 0.3s ease;
      }
      .contrast-preview .sample-text {
        font-size: 1.25rem;
        margin-bottom: 0.5rem;
      }
      .contrast-preview .sample-small {
        font-size: 0.9rem;
      }
      .contrast-results {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        margin: 1.5rem 0;
      }
      .contrast-result {
        padding: 1rem;
        border-radius: 8px;
        text-align: center;
      }
      .contrast-result.pass {
        background: #e8f5e9;
        border: 2px solid #4caf50;
      }
      .contrast-result.fail {
        background: #ffebee;
        border: 2px solid #f44336;
      }
      .contrast-ratio {
        font-size: 2rem;
        font-weight: 700;
      }
      .pass .contrast-ratio {
        color: #2e7d32;
      }
      .fail .contrast-ratio {
        color: #c62828;
      }
      .contrast-label {
        font-size: 0.9rem;
        color: #666;
      }
      .result-icon {
        font-size: 1.5rem;
      }

      /* Alt Text Practice ‚Äî upgraded */
      .alt-text-exercise {
        margin: 1.5rem 0;
        padding: 1.5rem;
        background: #f5f5f5;
        border-radius: 8px;
      }
      .alt-text-image {
        max-width: 100%;
        max-height: 300px;
        display: block;
        margin: 0 auto 1rem;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }
      .alt-text-input {
        width: 100%;
        padding: 0.75rem;
        font-size: 1rem;
        border: 2px solid #ddd;
        border-radius: 8px;
        margin: 0.5rem 0 1rem;
      }
      .alt-text-input:focus {
        border-color: var(--ua-maroon, #ab0520);
        outline: 3px solid var(--ua-maroon, #ab0520);
        outline-offset: 2px;
      }
      .alt-text-feedback {
        padding: 1rem;
        border-radius: 8px;
        margin-top: 1rem;
      }
      .alt-text-feedback.excellent,
      .alt-text-feedback.good {
        background: #e8f5e9;
        border-left: 4px solid #4caf50;
      }
      .alt-text-feedback.needs-improvement {
        background: #fff8e1;
        border-left: 4px solid #ffa000;
      }
      .alt-text-feedback.poor {
        background: #fff3e0;
        border-left: 4px solid #ff7043;
      }
      .alt-text-feedback.insufficient {
        background: #ffebee;
        border-left: 4px solid #ef5350;
      }
      .image-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
      }
      .image-nav button {
        padding: 0.5rem 1rem;
        background: #1565c0;
        color: #fff;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 0.95rem;
      }
      .image-nav button:disabled {
        background: #ccc;
        cursor: not-allowed;
      }
      .image-nav button:focus {
        outline: 3px solid var(--ua-maroon, #ab0520);
        outline-offset: 2px;
      }
      .alt-btn-row {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-top: 0.5rem;
      }
      .alt-btn-row button {
        padding: 0.6rem 1.2rem;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 600;
      }
      .alt-btn-row button:focus {
        outline: 3px solid var(--ua-maroon, #ab0520);
        outline-offset: 2px;
      }
      .alt-btn-check {
        background: #1565c0;
        color: #fff;
      }
      .alt-btn-check:hover {
        background: #0d47a1;
      }
      .alt-btn-hint {
        background: #fff;
        color: #1565c0;
        border: 1px solid #1565c0 !important;
      }
      .alt-btn-reveal {
        background: #f5f5f5;
        color: #333;
        border: 1px solid #ccc !important;
      }
      .alt-btn-retry {
        background: #fff;
        color: #1565c0;
        border: 1px solid #1565c0 !important;
      }

      /* Progress dots */
      .alt-progress {
        display: flex;
        gap: 0.5rem;
        align-items: center;
        margin-bottom: 1rem;
      }
      .alt-progress-dot {
        width: 1.1rem;
        height: 1.1rem;
        border-radius: 50%;
        border: 2px solid #999;
        background: #fff;
        display: inline-block;
      }
      .alt-progress-dot.active {
        border-color: #1565c0;
        background: #bbdefb;
      }
      .alt-progress-dot.completed {
        border-color: #4caf50;
        background: #4caf50;
      }
      .alt-progress-label {
        font-size: 0.9rem;
        color: #555;
        margin-left: 0.5rem;
      }

      /* Type badge */
      .alt-type-badge {
        display: inline-block;
        padding: 0.2rem 0.65rem;
        border-radius: 4px;
        font-size: 0.8rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.04em;
        margin-bottom: 0.5rem;
      }
      .alt-type-badge.simple {
        background: #e3f2fd;
        color: #0d47a1;
      }
      .alt-type-badge.contextual {
        background: #e8eaf6;
        color: #283593;
      }
      .alt-type-badge.informational {
        background: #fce4ec;
        color: #880e4f;
      }
      .alt-type-badge.decorative {
        background: #f3e5f5;
        color: #6a1b9a;
      }
      .alt-type-badge.complex {
        background: #fff3e0;
        color: #e65100;
      }

      /* Model answer reveal */
      .alt-model-answer {
        margin-top: 1rem;
        padding: 1rem;
        background: #e3f2fd;
        border-radius: 8px;
        border-left: 4px solid #1565c0;
      }
      .alt-model-answer ul {
        margin: 0.5rem 0 0 1.2rem;
        padding: 0;
      }
      .alt-model-answer li {
        margin: 0.25rem 0;
      }

      /* Hint panel */
      .alt-hint-panel {
        margin-top: 0.75rem;
        padding: 0.75rem 1rem;
        background: #fffde7;
        border-left: 4px solid #fdd835;
        border-radius: 4px;
      }

      /* Summary panel */
      .alt-summary {
        margin-top: 2rem;
        padding: 1.5rem;
        background: #e8f5e9;
        border: 2px solid #4caf50;
        border-radius: 10px;
      }
      .alt-summary.mixed {
        background: #fff8e1;
        border-color: #ffa000;
      }
      .alt-summary.poor {
        background: #ffebee;
        border-color: #ef5350;
      }
      .alt-summary h4 {
        margin-top: 0;
      }
      .alt-summary ul {
        margin: 0.5rem 0;
        padding-left: 1.5rem;
      }

      /* Heading Validator */
      .heading-input {
        width: 100%;
        min-height: 200px;
        padding: 1rem;
        font-family: monospace;
        font-size: 0.95rem;
        border: 2px solid #ddd;
        border-radius: 8px;
        margin: 1rem 0;
      }
      .heading-input:focus {
        border-color: #1565c0;
        outline: none;
      }
      .heading-output {
        margin: 1.5rem 0;
      }
      .heading-tree {
        font-family: monospace;
        padding: 1rem;
        background: #f5f5f5;
        border-radius: 8px;
        white-space: pre-wrap;
      }
      .heading-error {
        color: #c62828;
        background: #ffebee;
        padding: 0.5rem;
        border-radius: 4px;
        margin: 0.5rem 0;
      }
      .heading-warning {
        color: #f57c00;
        background: #fff3e0;
        padding: 0.5rem;
        border-radius: 4px;
        margin: 0.5rem 0;
      }
      .heading-success {
        color: #2e7d32;
        background: #e8f5e9;
        padding: 0.5rem;
        border-radius: 4px;
        margin: 0.5rem 0;
      }
      .analyze-btn {
        padding: 0.75rem 1.5rem;
        background: #1565c0;
        color: #fff;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 600;
      }
      .analyze-btn:hover {
        background: #0d47a1;
      }

      /* Link Text Checker */
      .link-examples {
        display: grid;
        gap: 1rem;
        margin: 1.5rem 0;
      }
      .link-example {
        display: flex;
        align-items: flex-start;
        gap: 1rem;
        padding: 1rem;
        background: #f5f5f5;
        border-radius: 8px;
      }
      .link-status {
        font-size: 1.5rem;
        flex-shrink: 0;
      }
      .link-content {
        flex: 1;
      }
      .link-text {
        font-weight: 600;
        color: #1565c0;
      }
      .link-context {
        font-size: 0.9rem;
        color: #666;
        margin-top: 0.25rem;
      }
      .link-verdict {
        font-size: 0.85rem;
        margin-top: 0.5rem;
        padding: 0.25rem 0.5rem;
        border-radius: 4px;
        display: inline-block;
      }
      .link-verdict.good {
        background: #e8f5e9;
        color: #2e7d32;
      }
      .link-verdict.bad {
        background: #ffebee;
        color: #c62828;
      }

      /* ‚îÄ‚îÄ Wizard Layout ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
      .wizard-card {
        border: 2px solid var(--border-color, #d0d5dd);
        border-radius: 0.75rem;
        padding: 2rem;
        background: #fff;
        margin-bottom: 2rem;
        min-height: 400px;
        display: flex;
        flex-direction: column;
      }
      .wizard-step {
        display: none;
      }
      .wizard-step.active {
        display: block;
        animation: fadeIn 0.3s ease;
      }
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(5px); }
        to { opacity: 1; transform: translateY(0); }
      }
      .wizard-options {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.25rem;
        margin: 1.5rem 0;
      }
      .wizard-option-btn {
        display: flex;
        flex-direction: column;
        padding: 1.5rem;
        background: #fff;
        border: 2px solid var(--border-color, #d0d5dd);
        border-radius: 0.75rem;
        cursor: pointer;
        text-align: left;
        transition: border-color 0.15s, background 0.15s;
        height: 100%;
      }
      .wizard-option-btn:hover {
        border-color: var(--ua-maroon, #ab0520);
        background: #fdf6f7;
      }
      .wizard-option-btn:focus-visible {
        outline: 3px solid var(--ua-maroon, #ab0520);
        outline-offset: 2px;
      }
      .wizard-option-btn.selected {
        border-color: var(--ua-maroon, #ab0520);
        background: #fdf1f3;
        box-shadow: 0 0 0 1px var(--ua-maroon, #ab0520);
      }
      .wizard-option-title {
        font-weight: 700;
        font-size: 1.1rem;
        margin-bottom: 0.5rem;
        color: var(--ua-blue, #0c234b);
      }
      .wizard-option-desc {
        font-size: 0.95rem;
        color: var(--text-muted, #595959);
        line-height: 1.4;
      }
      .wizard-summary {
        background: #f8f8f8;
        padding: 1.5rem;
        border-radius: 0.5rem;
        margin-bottom: 1.5rem;
      }

      /* ‚îÄ‚îÄ Quiz Layout ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
      .quiz-progress {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 1.5rem;
        flex-wrap: wrap;
      }
      .quiz-progress-bar {
        flex: 1;
        min-width: 120px;
        height: 0.5rem;
        background: var(--border-color, #d0d5dd);
        border-radius: 0.25rem;
        overflow: hidden;
      }
      .quiz-progress-fill {
        height: 100%;
        background: var(--ua-maroon, #ab0520);
        border-radius: 0.25rem;
        transition: width 0.3s ease;
        width: 0%;
      }
      .quiz-progress-label {
        font-size: 0.85rem;
        font-weight: 600;
        color: var(--text-muted, #595959);
        white-space: nowrap;
      }
      .quiz-card {
        border: 1px solid var(--border-color, #d0d5dd);
        border-radius: 0.75rem;
        padding: 1.75rem;
        margin-bottom: 1.5rem;
        background: #fff;
      }
      .quiz-scenario {
        font-size: 0.95rem;
        color: var(--text-muted, #595959);
        margin: 0 0 1.25rem;
        line-height: 1.5;
      }
      .quiz-options {
        list-style: none;
        padding: 0;
        margin: 0 0 1rem;
      }
      .quiz-option {
        margin-bottom: 0.5rem;
      }
      .quiz-option label {
        display: flex;
        align-items: flex-start;
        gap: 0.75rem;
        padding: 0.75rem 1rem;
        border: 2px solid var(--border-color, #d0d5dd);
        border-radius: 0.5rem;
        cursor: pointer;
        transition: border-color 0.15s, background 0.15s;
        line-height: 1.4;
      }
      .quiz-option label:hover {
        border-color: var(--ua-maroon, #ab0520);
        background: #fdf6f7;
      }
      .quiz-option input[type="radio"] {
        margin-top: 0.2rem;
        flex-shrink: 0;
        width: 1.1rem;
        height: 1.1rem;
        accent-color: var(--ua-maroon, #ab0520);
      }
      .quiz-option.correct label { border-color: #2e7d32; background: #e8f5e9; }
      .quiz-option.incorrect label { border-color: #c62828; background: #ffebee; }
      .quiz-option.reveal-correct label { border-color: #2e7d32; background: #e8f5e9; }
      .quiz-feedback {
        padding: 1rem 1.25rem;
        border-radius: 0.5rem;
        margin-top: 1rem;
        line-height: 1.5;
      }
      .quiz-feedback.correct { background: #e8f5e9; border-left: 4px solid #2e7d32; }
      .quiz-feedback.incorrect { background: #ffebee; border-left: 4px solid #c62828; }
      .quiz-results {
        border: 2px solid var(--border-color, #d0d5dd);
        border-radius: 0.75rem;
        padding: 2rem;
        text-align: center;
        background: #fff;
      }
      .quiz-score { font-size: 3rem; font-weight: 800; color: var(--ua-maroon, #ab0520); }

      /* ‚îÄ‚îÄ Keyboard Sim Layout ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
      .key-display {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.75rem 1rem;
        margin-bottom: 1.5rem;
        background: #f8f8f8;
        border: 1px solid var(--border-color, #d0d5dd);
        border-radius: 0.5rem;
        font-size: 0.95rem;
        min-height: 2.5rem;
      }
      .key-display kbd {
        display: inline-block;
        padding: 0.25rem 0.6rem;
        background: #fff;
        border: 1px solid #bbb;
        border-radius: 4px;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        font-family: inherit;
        font-size: 0.9rem;
        font-weight: 600;
        min-width: 1.5rem;
        text-align: center;
      }
      .practice-area {
        border: 2px solid var(--border-color, #d0d5dd);
        border-radius: 0.75rem;
        padding: 1.5rem;
        background: #fff;
        margin-bottom: 1.5rem;
      }
      .demo-nav { display: flex; gap: 0; background: var(--ua-blue, #0c234b); border-radius: 0.5rem; overflow: hidden; margin-bottom: 1rem; }
      .demo-nav-item { padding: 0.6rem 1rem; color: #fff; background: none; border: none; font: inherit; font-size: 0.9rem; cursor: pointer; transition: background 0.15s; }
      .demo-nav-item:hover { background: rgba(255, 255, 255, 0.15); }
      .demo-nav-item:focus-visible { outline: 3px solid #fff; outline-offset: -3px; }
      .demo-nav-item[aria-current="page"] { background: var(--ua-maroon, #ab0520); font-weight: 600; }
      .task-list { list-style: none; padding: 0; margin: 1rem 0 0; }
      .task-list li { padding: 0.4rem 0; display: flex; align-items: center; gap: 0.5rem; font-size: 0.95rem; }
      .task-check.done { color: #2e7d32; }
      .task-check.pending { color: #999; }

      /* ‚îÄ‚îÄ Readability Layout ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
      .read-input { width: 100%; min-height: 180px; padding: 1rem; font: inherit; font-size: 1rem; line-height: 1.6; border: 2px solid var(--border-color, #d0d5dd); border-radius: 0.5rem; margin: 0.5rem 0 1rem; resize: vertical; }
      .read-results { border: 1px solid var(--border-color, #d0d5dd); border-radius: 0.75rem; padding: 1.5rem; background: #fff; margin-top: 1.5rem; }
      .read-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 1rem; margin-bottom: 1.5rem; }
      .read-stat { text-align: center; padding: 1rem; background: #f8f8f8; border-radius: 0.5rem; border: 1px solid var(--border-color, #d0d5dd); }
      .read-stat-value { font-size: 1.75rem; font-weight: 800; display: block; margin-bottom: 0.15rem; }
      .read-badge { display: inline-block; padding: 0.3rem 0.85rem; border-radius: 2rem; font-weight: 700; font-size: 0.85rem; text-transform: uppercase; letter-spacing: 0.03em; }
      .read-badge.easy { background: #e8f5e9; color: #2e7d32; border: 1px solid #2e7d32; }
      .read-badge.moderate { background: #fff8e1; color: #f57f17; border: 1px solid #f57f17; }
      .read-badge.hard { background: #ffebee; color: #c62828; border: 1px solid #c62828; }
      .read-tips { margin-top: 1.25rem; padding: 1rem 1.25rem; background: #e3f2fd; border-left: 4px solid #1565c0; border-radius: 0 0.5rem 0.5rem 0; }

      /* ‚îÄ‚îÄ Low Vision Sim Layout ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
      .sim-controls { display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 0.75rem; margin-bottom: 1.5rem; }
      .sim-toggle { display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; border: 2px solid var(--border-color, #d0d5dd); border-radius: 0.5rem; background: #fff; cursor: pointer; transition: border-color 0.15s, background 0.15s; }
      .sim-toggle:hover { border-color: var(--ua-maroon, #ab0520); }
      .sim-toggle[data-active="true"] { border-color: var(--ua-maroon, #ab0520); background: #fdf1f3; }
      .sim-viewport { position: relative; overflow: hidden; border: 2px solid var(--border-color, #d0d5dd); border-radius: 0.75rem; background: #fff; transition: filter 0.3s ease; }
      .sim-content { padding: 2rem; max-width: 640px; margin: 0 auto; }
      .tunnel-overlay, .macula-overlay { display: none; position: absolute; inset: 0; pointer-events: none; z-index: 10; }
      .tunnel-overlay.active, .macula-overlay.active { display: block; }
      .svg-filters { position: absolute; width: 0; height: 0; overflow: hidden; }
    </style>
  </head>
  <body>
    <a class="skip-link" href="#maincontent">Skip to main content</a>
    <header>
      <div class="site-header">
        <div class="site-header-brand">
          University of Arizona ¬∑ Digital Accessibility
        </div>
        <button
          type="button"
          class="nav-toggle"
          aria-expanded="false"
          aria-controls="primary-nav"
          aria-label="Open navigation menu"
        >
          Menu
        </button>
        <nav class="site-header-nav" aria-label="Primary">
          <a href="home.html">Home</a>
          <a href="roles.html">I Am A...</a>
          <a href="documents-media.html">Documents &amp; Media</a>
          <a href="web-app.html">Web &amp; Apps</a>
          <a href="teaching-learning.html">Teaching &amp; Learning</a>
          <a href="procurement.html">Procurement</a>
          <a href="tools-checklists.html" aria-current="page"
            >Tools &amp; Checklists</a
          >
          <a href="policies-governance.html">Policies &amp; Governance</a>
          <a href="support.html">Support</a>
        </nav>
      </div>
      <nav aria-label="Breadcrumb">
        <p>
          <a href="home.html">Home</a> /
          <a href="tools-checklists.html">Tools</a> / Interactive Tools
        </p>
      </nav>
      <h1>Interactive Accessibility Tools</h1>
      <p>Nine hands-on tools to practice, test, and learn accessibility skills &mdash; from checking color contrast and writing alt text to simulating low vision and taking a WCAG quiz. No installation needed; everything runs right here in your browser.</p>
    </header>
    <main id="maincontent">
      <!-- Tool 1: Color Contrast Checker -->
      <section class="tool-section" aria-labelledby="contrast-title">
        <h2 id="contrast-title">
          <span aria-hidden="true">üé®</span> Color Contrast Checker
        </h2>
        <p>
          Enter foreground and background colors to instantly calculate their contrast ratio.
          WCAG 2.2 Level AA requires at least <strong>4.5:1</strong> for normal text and
          <strong>3:1</strong> for large text (18 pt+ or 14 pt+ bold). This checker shows
          pass/fail results for both AA and AAA conformance levels, helping you pick color
          combinations that everyone can read &mdash; including people with low vision or
          color blindness.
        </p>

        <div class="contrast-inputs">
          <div class="color-input-group">
            <label for="fg-color">Text color (foreground)</label>
            <div class="color-picker-row">
              <input
                type="color"
                id="fg-color-picker"
                value="#000000"
                aria-label="Pick foreground color"
              />
              <input
                type="text"
                id="fg-color"
                value="#000000"
                placeholder="#000000"
                aria-describedby="fg-format"
              />
            </div>
            <small id="fg-format">Enter hex color (e.g., #1565c0)</small>
          </div>
          <div class="color-input-group">
            <label for="bg-color">Background color</label>
            <div class="color-picker-row">
              <input
                type="color"
                id="bg-color-picker"
                value="#ffffff"
                aria-label="Pick background color"
              />
              <input
                type="text"
                id="bg-color"
                value="#ffffff"
                placeholder="#ffffff"
                aria-describedby="bg-format"
              />
            </div>
            <small id="bg-format">Enter hex color (e.g., #ffffff)</small>
          </div>
        </div>

        <div
          id="contrast-preview"
          class="contrast-preview"
          style="background: #ffffff; color: #000000"
        >
          <p class="sample-text"><strong>Sample text at 16px</strong></p>
          <p class="sample-small">
            Small text at 14px ‚Äî harder to read with low contrast
          </p>
        </div>

        <div id="contrast-results" class="contrast-results" aria-live="polite">
          <div class="contrast-result pass" id="result-ratio">
            <div class="contrast-ratio">21:1</div>
            <div class="contrast-label">Contrast ratio</div>
          </div>
          <div class="contrast-result pass" id="result-aa-normal">
            <div class="result-icon">‚úì</div>
            <div class="contrast-label">AA Normal text (4.5:1)</div>
          </div>
          <div class="contrast-result pass" id="result-aa-large">
            <div class="result-icon">‚úì</div>
            <div class="contrast-label">AA Large text (3:1)</div>
          </div>
          <div class="contrast-result pass" id="result-aaa">
            <div class="result-icon">‚úì</div>
            <div class="contrast-label">AAA Enhanced (7:1)</div>
          </div>
        </div>

        <details>
          <summary>
            <span aria-hidden="true">üìö</span> About contrast requirements
          </summary>
          <ul>
            <li>
              <strong>WCAG AA Normal text:</strong> 4.5:1 ‚Äî Required for body
              text
            </li>
            <li>
              <strong>WCAG AA Large text:</strong> 3:1 ‚Äî For text 18pt+ or 14pt+
              bold
            </li>
            <li>
              <strong>WCAG AAA Enhanced:</strong> 7:1 ‚Äî Recommended for best
              readability
            </li>
            <li>
              <strong>UI Components:</strong> 3:1 ‚Äî For icons, borders, focus
              indicators
            </li>
          </ul>
        </details>
      </section>

      <!-- Tool 2: Alt Text Practice (upgraded with scoring engine) -->
      <section class="tool-section" aria-labelledby="alt-title">
        <h2 id="alt-title">
          <span aria-hidden="true">üñºÔ∏è</span> Alt Text Practice
        </h2>
        <p>
          Practice writing effective alternative text for five different types
          of images. After you submit, a rule-based scoring engine will evaluate
          your text against curated model answers, key-concept coverage, and
          common anti-patterns ‚Äî no AI involved.
        </p>

        <!-- Brief intro primer -->
        <details open>
          <summary>
            <strong>What is alt text and why does it matter?</strong>
          </summary>
          <div style="padding: 0.5rem 0 0 0.5rem">
            <p>
              "Alt text" (the <code>alt</code> attribute on an
              <code>&lt;img&gt;</code> element) provides a text equivalent of an
              image for people who cannot see it. Screen readers read this text
              aloud, and it appears when images fail to load.
            </p>
            <p>
              Good alt text is <strong>concise</strong>,
              <strong>descriptive</strong>, and focused on the image's
              <strong>purpose</strong> in context ‚Äî not its pixel-level
              appearance. For decorative images that carry no information, the
              correct practice is an empty <code>alt</code> attribute
              (<code>alt=""</code>).
            </p>
            <p>
              <a
                href="https://www.w3.org/WAI/tutorials/images/decision-tree/"
                target="_blank"
                rel="noopener"
              >
                W3C Alt Text Decision Tree ‚Üó
              </a>
              ‚Äî use this to decide what kind of alt text an image needs.
            </p>
          </div>
        </details>

        <!-- Progress indicator -->
        <div
          class="alt-progress"
          id="alt-progress"
          role="status"
          aria-label="Image progress"
        >
          <!-- JS will render dots here -->
        </div>

        <div class="alt-text-exercise" id="alt-exercise">
          <!-- Image type badge -->
          <div id="alt-type-badge" class="alt-type-badge"></div>

          <!-- Context -->
          <p id="image-context">
            <strong>Context:</strong>
          </p>

          <!-- The practice image -->
          <img
            id="practice-image"
            class="alt-text-image"
            src=""
            alt="Practice image placeholder"
          />

          <!-- Input -->
          <label for="alt-input" id="alt-input-label">
            <strong>Write your alt text:</strong>
            <span
              style="
                font-weight: 400;
                color: #555;
                display: block;
                font-size: 0.9rem;
              "
            >
              For decorative images, leave this field blank.
            </span>
          </label>
          <textarea
            id="alt-input"
            class="alt-text-input"
            placeholder="Describe this image for someone who cannot see it‚Ä¶"
            rows="3"
            aria-describedby="alt-input-label"
          ></textarea>

          <!-- Action buttons -->
          <div class="alt-btn-row">
            <button
              type="button"
              class="alt-btn-check"
              id="btn-check"
              aria-describedby="alt-title"
            >
              Check my alt text
            </button>
            <button type="button" class="alt-btn-hint" id="btn-hint">
              Need a hint?
            </button>
            <button
              type="button"
              class="alt-btn-reveal"
              id="btn-reveal"
              style="display: none"
            >
              Show model answer
            </button>
            <button
              type="button"
              class="alt-btn-retry"
              id="btn-retry"
              style="display: none"
            >
              Try again
            </button>
          </div>

          <!-- Hint panel (hidden by default) -->
          <div id="alt-hint" class="alt-hint-panel" hidden>
            <!-- JS populates -->
          </div>

          <!-- Feedback panel (populated by engine) -->
          <div
            id="alt-feedback"
            class="alt-text-feedback"
            hidden
            aria-live="assertive"
            aria-atomic="true"
          ></div>

          <!-- Model answer panel (hidden until revealed) -->
          <div id="alt-model-answer" class="alt-model-answer" hidden>
            <strong>Model answers:</strong>
            <ul id="alt-model-list"></ul>
          </div>

          <!-- Navigation -->
          <div class="image-nav">
            <button type="button" id="prev-image" disabled>‚Üê Previous</button>
            <span id="image-counter">Image 1 of 5</span>
            <button type="button" id="next-image">Next ‚Üí</button>
          </div>
        </div>

        <!-- Summary (shown after all 5 are evaluated) -->
        <div id="alt-summary" class="alt-summary" hidden aria-live="polite">
          <!-- JS populates -->
        </div>

        <details>
          <summary>
            <span aria-hidden="true">üìö</span> Alt text tips and resources
          </summary>
          <ul>
            <li>Be concise but descriptive (usually under 125 characters).</li>
            <li>
              Don't start with "Image of‚Ä¶" or "Picture of‚Ä¶" ‚Äî redundant with the
              element's role.
            </li>
            <li>
              Context matters ‚Äî the same image may need different alt text on
              different pages.
            </li>
            <li>For decorative images, use empty alt (<code>alt=""</code>).</li>
            <li>Describe purpose, not just appearance.</li>
            <li>Charts &amp; graphs: summarise the data or trend.</li>
            <li>
              <a
                href="https://www.w3.org/WAI/tutorials/images/"
                target="_blank"
                rel="noopener"
              >
                W3C Images Tutorial ‚Üó
              </a>
            </li>
            <li>
              <a
                href="https://www.w3.org/TR/WCAG22/#non-text-content"
                target="_blank"
                rel="noopener"
              >
                WCAG 2.2 SC 1.1.1 ‚Äî Non-text Content ‚Üó
              </a>
            </li>
          </ul>
        </details>
      </section>

      <!-- Tool 3: Heading Structure Validator -->
      <section class="tool-section" aria-labelledby="heading-title">
        <h2 id="heading-title">
          <span aria-hidden="true">üìã</span> Heading Structure Validator
        </h2>
        <p>
          Paste your page&rsquo;s heading structure to check for hierarchy issues.
          Screen reader users navigate by headings, so a logical outline &mdash;
          H1 &rarr; H2 &rarr; H3, without skipping levels &mdash; is essential for
          usability. The validator flags skipped levels, missing H1 elements, and pages
          with multiple H1 headings, then displays a visual outline of your document
          structure.
        </p>

        <label for="heading-input"
          ><strong>Enter headings (one per line, include level):</strong></label
        >
        <textarea
          id="heading-input"
          class="heading-input"
          placeholder="H1 Page Title
H2 First Section
H3 Subsection
H3 Another Subsection
H2 Second Section
H3 Subsection"
        ></textarea>

        <button class="analyze-btn" id="btn-validate-headings" type="button">
          Validate structure
        </button>

        <div
          id="heading-output"
          class="heading-output"
          hidden
          aria-live="polite"
        >
          <h4>Heading outline</h4>
          <div id="heading-tree" class="heading-tree"></div>
          <div id="heading-issues"></div>
        </div>

        <details>
          <summary>
            <span aria-hidden="true">üìö</span> Heading structure rules
          </summary>
          <ul>
            <li>Every page should have exactly one H1</li>
            <li>Don't skip heading levels (H2 ‚Üí H4 is bad)</li>
            <li>Headings should create a logical outline</li>
            <li>Use headings for structure, not just styling</li>
            <li>Screen reader users navigate by headings</li>
          </ul>
        </details>
      </section>

      <!-- Tool 4: Link Text Checker -->
      <section class="tool-section" aria-labelledby="link-title">
        <h2 id="link-title">
          <span aria-hidden="true">üîó</span> Link Text Examples
        </h2>
        <p>
          Learn to write descriptive, meaningful link text by studying good and bad examples
          side by side. Screen reader users often browse a list of links pulled out of
          context &mdash; so vague text like &ldquo;click here&rdquo; or &ldquo;read
          more&rdquo; tells them nothing about where the link goes. These examples show
          why clear link text matters and how to write it well.
        </p>

        <div class="link-examples">
          <div class="link-example">
            <span class="link-status" aria-hidden="true">‚ùå</span>
            <div class="link-content">
              <span class="link-text">"Click here"</span>
              <p class="link-context">
                To learn more about our accessibility services, click here.
              </p>
              <span class="link-verdict bad"
                >Bad ‚Äî doesn't describe destination</span
              >
            </div>
          </div>
          <div class="link-example">
            <span class="link-status" aria-hidden="true">‚úÖ</span>
            <div class="link-content">
              <span class="link-text">"accessibility services"</span>
              <p class="link-context">
                Learn more about our accessibility services.
              </p>
              <span class="link-verdict good"
                >Good ‚Äî describes what you'll find</span
              >
            </div>
          </div>
          <div class="link-example">
            <span class="link-status" aria-hidden="true">‚ùå</span>
            <div class="link-content">
              <span class="link-text">"Read more"</span>
              <p class="link-context">
                University announces new research center. Read more.
              </p>
              <span class="link-verdict bad"
                >Bad ‚Äî no context when links are listed</span
              >
            </div>
          </div>
          <div class="link-example">
            <span class="link-status" aria-hidden="true">‚úÖ</span>
            <div class="link-content">
              <span class="link-text"
                >"Read more about the new research center"</span
              >
              <p class="link-context">
                University announces new research center. Read more about the
                new research center.
              </p>
              <span class="link-verdict good">Good ‚Äî works out of context</span>
            </div>
          </div>
          <div class="link-example">
            <span class="link-status" aria-hidden="true">‚ùå</span>
            <div class="link-content">
              <span class="link-text"
                >"https://arizona.edu/forms/registration.pdf"</span
              >
              <p class="link-context">
                Download the form: https://arizona.edu/forms/registration.pdf
              </p>
              <span class="link-verdict bad"
                >Bad ‚Äî URLs are hard to read/hear</span
              >
            </div>
          </div>
          <div class="link-example">
            <span class="link-status" aria-hidden="true">‚úÖ</span>
            <div class="link-content">
              <span class="link-text">"Registration form (PDF, 245KB)"</span>
              <p class="link-context">
                Download the Registration form (PDF, 245KB).
              </p>
              <span class="link-verdict good"
                >Good ‚Äî describes content and format</span
              >
            </div>
          </div>
        </div>

        <div
          style="
            background: #e3f2fd;
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
          "
        >
          <strong>The "list of links" test:</strong> If someone hears only the
          link text (via screen reader's links list), will they understand where
          each link goes?
        </div>
      </section>

      <!-- Tool 5: Accessibility Quick-Start Wizard -->
      <section class="tool-section" aria-labelledby="wizard-title">
        <h2 id="wizard-title">
          <span aria-hidden="true">üß≠</span> Accessibility Quick-Start Wizard
        </h2>
        <p>Answer three quick questions about your role and needs, and get a personalized list of accessibility resources, guides, and support actions.</p>
        
        <div id="wizard-container" class="wizard-card">
          <div id="wizard-announce" class="sr-only" aria-live="polite"></div>
          
          <!-- Step 1: Role -->
          <div class="wizard-step active" id="wizard-step-1">
            <h3>Step 1: What is your primary role?</h3>
            <p>We'll tailor the tools and resources based on your day-to-day work.</p>
            <div class="wizard-options">
              <button type="button" class="wizard-option-btn" data-role="staff">
                <span class="wizard-option-title">Staff / Admin</span>
                <span class="wizard-option-desc">Emails, documents, events, and general communications.</span>
              </button>
              <button type="button" class="wizard-option-btn" data-role="faculty">
                <span class="wizard-option-title">Faculty / Instructor</span>
                <span class="wizard-option-desc">Course content, D2L Brightspace, syllabus design, and teaching.</span>
              </button>
              <button type="button" class="wizard-option-btn" data-role="developer">
                <span class="wizard-option-title">Developer / IT</span>
                <span class="wizard-option-desc">Coding, web applications, widget development, and technical audits.</span>
              </button>
              <button type="button" class="wizard-option-btn" data-role="student">
                <span class="wizard-option-title">Student</span>
                <span class="wizard-option-desc">Assistive technology, accessible learning, and student support.</span>
              </button>
            </div>
          </div>

          <!-- Step 2: Need -->
          <div class="wizard-step" id="wizard-step-2">
            <button type="button" class="alt-btn-hint" onclick="wizardGoTo(1)" style="margin-bottom:1.5rem;">&larr; Back</button>
            <h3>Step 2: What are you working on right now?</h3>
            <p>Select the option that best matches your current task.</p>
            <div id="wizard-needs-container" class="wizard-options">
              <!-- JS populates based on role -->
            </div>
          </div>

          <!-- Step 3: Support -->
          <div class="wizard-step" id="wizard-step-3">
            <button type="button" class="alt-btn-hint" onclick="wizardGoTo(2)" style="margin-bottom:1.5rem;">&larr; Back</button>
            <h3>Step 3: What kind of support do you need?</h3>
            <div class="wizard-options">
              <button type="button" class="wizard-option-btn" data-support="checklist">
                <span class="wizard-option-title">A Step-by-Step Checklist</span>
                <span class="wizard-option-desc">I want a list of items to verify before I finish.</span>
              </button>
              <button type="button" class="wizard-option-btn" data-support="basics">
                <span class="wizard-option-title">Basics & Concepts</span>
                <span class="wizard-option-desc">Explain the "why" and "how" behind this topic.</span>
              </button>
              <button type="button" class="wizard-option-btn" data-support="tool">
                <span class="wizard-option-title">A Tool or Simulator</span>
                <span class="wizard-option-desc">I need a tool to test or simulate the experience.</span>
              </button>
            </div>
          </div>

          <!-- Step 4: Results -->
          <div class="wizard-step" id="wizard-step-4">
            <h3 id="wizard-results-title">Your Quick-Start Guide</h3>
            <div id="wizard-results-content" class="wizard-summary" aria-live="polite">
              <!-- JS populates -->
            </div>
            <button type="button" class="analyze-btn" onclick="resetWizard()">Start Over</button>
          </div>
        </div>
      </section>

      <!-- Tool 6: WCAG Quick Quiz -->
      <section class="tool-section" aria-labelledby="quiz-title">
        <h2 id="quiz-title">
          <span aria-hidden="true">üéØ</span> WCAG Quick Quiz
        </h2>
        <p>Test your accessibility knowledge with scenario-based questions. Instant feedback after each answer.</p>
        
        <div id="quiz-announce" class="sr-only" aria-live="assertive" role="status"></div>
        <div class="quiz-progress">
          <div class="quiz-progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="10" aria-label="Quiz progress">
            <div class="quiz-progress-fill" id="progress-fill"></div>
          </div>
          <span class="quiz-progress-label" id="progress-label">0 / 10</span>
        </div>
        <div id="quiz-area"></div>
        <div id="quiz-results" class="quiz-results" hidden aria-live="polite"></div>
      </section>

      <!-- Tool 7: Keyboard Navigation Simulator -->
      <section class="tool-section" aria-labelledby="keyboard-title">
        <h2 id="keyboard-title">
          <span aria-hidden="true">‚å®Ô∏è</span> Keyboard Navigation Simulator
        </h2>
        <p>Practice navigating common UI patterns using only your keyboard. Your keystrokes are shown in real time.</p>

        <div class="key-display" aria-live="polite">
          <span class="key-display-label">Last key pressed:</span>
          <kbd id="key-name">‚Äî</kbd>
        </div>

        <div class="practice-area">
          <h3>Scenario: Navigation Bar</h3>
          <p>Use <kbd>Tab</kbd> to move through the items. Press <kbd>Enter</kbd> on any item. Use <kbd>Shift+Tab</kbd> to go backward.</p>
          <nav class="demo-nav" aria-label="Demo navigation">
            <button type="button" class="demo-nav-item" aria-current="page" data-task="nav-home">Home</button>
            <button type="button" class="demo-nav-item" data-task="nav-about">About</button>
            <button type="button" class="demo-nav-item" data-task="nav-services">Services</button>
            <button type="button" class="demo-nav-item" data-task="nav-contact">Contact</button>
          </nav>
          <ul class="task-list" id="tasks-nav">
            <li><span class="task-check pending" aria-hidden="true">‚óã</span> Tab to "About"</li>
            <li><span class="task-check pending" aria-hidden="true">‚óã</span> Press Enter on "Services"</li>
          </ul>
        </div>
      </section>

      <!-- Tool 8: Readability Scorer -->
      <section class="tool-section" aria-labelledby="readability-title">
        <h2 id="readability-title">
          <span aria-hidden="true">üìñ</span> Readability Scorer
        </h2>
        <p>Paste text to see its reading level and plain-language tips. Aim for grade 8 or below.</p>
        
        <textarea id="read-text" class="read-input" placeholder="Paste your content here..."></textarea>
        <div style="display: flex; flex-wrap: wrap; gap: 0.75rem; align-items: center;">
          <button type="button" class="analyze-btn" id="btn-score-readability">Score Readability</button>
          <button type="button" class="alt-btn-hint" id="btn-clear-readability">Clear</button>
        </div>

        <div id="read-results" class="read-results" hidden aria-live="polite">
          <div class="read-grid" id="read-stats-grid"></div>
          <div id="read-grade-section"></div>
          <div id="read-tips-section"></div>
        </div>
      </section>

      <!-- Tool 9: Low Vision Simulator -->
      <section class="tool-section" aria-labelledby="lowvision-title">
        <h2 id="lowvision-title">
          <span aria-hidden="true">üëÅÔ∏è</span> Low Vision Simulator
        </h2>
        <p>Apply real-time filters to sample content to understand vision barriers.</p>

        <svg class="svg-filters" aria-hidden="true">
          <defs>
            <filter id="sim-protanopia"><feColorMatrix values="0.567, 0.433, 0, 0, 0 0.558, 0.442, 0, 0, 0 0, 0.242, 0.758, 0, 0 0, 0, 0, 1, 0"/></filter>
            <filter id="sim-deuteranopia"><feColorMatrix values="0.625, 0.375, 0, 0, 0 0.7, 0.3, 0, 0, 0 0, 0.3, 0.7, 0, 0 0, 0, 0, 1, 0"/></filter>
            <filter id="sim-tritanopia"><feColorMatrix values="0.95, 0.05, 0, 0, 0 0, 0.433, 0.567, 0, 0 0, 0.475, 0.525, 0, 0 0, 0, 0, 1, 0"/></filter>
            <filter id="sim-achromatopsia"><feColorMatrix values="0.299, 0.587, 0.114, 0, 0 0.299, 0.587, 0.114, 0, 0 0.299, 0.587, 0.114, 0, 0 0, 0, 0, 1, 0"/></filter>
          </defs>
        </svg>

        <div class="sim-controls" id="sim-controls">
          <label class="sim-toggle"><input type="checkbox" value="blur"> <span>Blur</span></label>
          <label class="sim-toggle"><input type="checkbox" value="contrast"> <span>Low Contrast</span></label>
          <label class="sim-toggle"><input type="checkbox" value="protanopia"> <span>Protanopia</span></label>
          <label class="sim-toggle"><input type="checkbox" value="deuteranopia"> <span>Deuteranopia</span></label>
          <label class="sim-toggle"><input type="checkbox" value="tunnel"> <span>Tunnel Vision</span></label>
        </div>

        <div class="sim-viewport" id="sim-viewport">
          <div class="tunnel-overlay" id="sim-tunnel" aria-hidden="true"></div>
          <div class="sim-content">
            <h3 style="margin:0;">Sample Content</h3>
            <p>Accessibility ensures that every student can succeed. <a>Learn about our mission.</a></p>
            <div style="display:flex; gap:0.5rem; margin-bottom:1rem;">
              <div style="width:40px;height:40px;background:#ab0520;border-radius:4px;"></div>
              <div style="width:40px;height:40px;background:#0c234b;border-radius:4px;"></div>
              <div style="width:40px;height:40px;background:#4caf50;border-radius:4px;"></div>
            </div>
            <button type="button" class="analyze-btn" style="pointer-events:none;">Demo Button</button>
          </div>
        </div>
      </section>

      <section aria-labelledby="more-tools">
        <h3 id="more-tools">More testing tools</h3>
        <p>These interactive tools complement full testing suites:</p>
        <ul>
          <li>
            <a href="testing-tools.html">Complete Testing Tools Guide</a> ‚Äî axe,
            WAVE, and more
          </li>
          <li>
            <a href="quick-reference-cards.html">Quick Reference Cards</a> ‚Äî
            Printable checklists
          </li>
          <li>
            <a href="experience-simulations.html">Disability Simulations</a> ‚Äî
            Experience barriers firsthand
          </li>
        </ul>
      </section>
    </main>
    <footer>
      <p>
        &copy; 2026 The Arizona Board of Regents on behalf of The University of
        Arizona.
      </p>
      <p>
        Questions?
        <a href="mailto:accessibility@arizona.edu">accessibility@arizona.edu</a>
        | <a href="tel:+15206213268">520-621-3268</a>
      </p>
    </footer>

    <script>
      // ========== Color Contrast Checker ==========
      const fgPicker = document.getElementById("fg-color-picker");
      const fgInput = document.getElementById("fg-color");
      const bgPicker = document.getElementById("bg-color-picker");
      const bgInput = document.getElementById("bg-color");

      function hexToRgb(hex) {
        hex = hex.replace("#", "");
        if (hex.length === 3) {
          hex = hex
            .split("")
            .map((c) => c + c)
            .join("");
        }
        const num = parseInt(hex, 16);
        return {
          r: (num >> 16) & 255,
          g: (num >> 8) & 255,
          b: num & 255,
        };
      }

      function getLuminance(r, g, b) {
        const [rs, gs, bs] = [r, g, b].map((c) => {
          c = c / 255;
          return c <= 0.03928 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);
        });
        return 0.2126 * rs + 0.7152 * gs + 0.0722 * bs;
      }

      function getContrastRatio(hex1, hex2) {
        const rgb1 = hexToRgb(hex1);
        const rgb2 = hexToRgb(hex2);
        const l1 = getLuminance(rgb1.r, rgb1.g, rgb1.b);
        const l2 = getLuminance(rgb2.r, rgb2.g, rgb2.b);
        const lighter = Math.max(l1, l2);
        const darker = Math.min(l1, l2);
        return (lighter + 0.05) / (darker + 0.05);
      }

      function updateContrast() {
        const fg = fgInput.value;
        const bg = bgInput.value;

        if (!/^#[0-9A-Fa-f]{6}$/.test(fg) || !/^#[0-9A-Fa-f]{6}$/.test(bg))
          return;

        const ratio = getContrastRatio(fg, bg);

        // Update preview
        const preview = document.getElementById("contrast-preview");
        preview.style.color = fg;
        preview.style.background = bg;

        // Update results
        document.querySelector("#result-ratio .contrast-ratio").textContent =
          ratio.toFixed(2) + ":1";

        const updateResult = (id, passes) => {
          const el = document.getElementById(id);
          el.classList.toggle("pass", passes);
          el.classList.toggle("fail", !passes);
          el.querySelector(".result-icon").textContent = passes ? "‚úì" : "‚úó";
        };

        updateResult("result-ratio", ratio >= 4.5);
        updateResult("result-aa-normal", ratio >= 4.5);
        updateResult("result-aa-large", ratio >= 3);
        updateResult("result-aaa", ratio >= 7);
      }

      fgPicker.addEventListener("input", () => {
        fgInput.value = fgPicker.value;
        updateContrast();
      });
      fgInput.addEventListener("input", () => {
        if (/^#[0-9A-Fa-f]{6}$/.test(fgInput.value)) {
          fgPicker.value = fgInput.value;
        }
        updateContrast();
      });
      bgPicker.addEventListener("input", () => {
        bgInput.value = bgPicker.value;
        updateContrast();
      });
      bgInput.addEventListener("input", () => {
        if (/^#[0-9A-Fa-f]{6}$/.test(bgInput.value)) {
          bgPicker.value = bgInput.value;
        }
        updateContrast();
      });

      // ========== Alt Text Practice (upgraded engine) ==========
      // ALT_TEXT_IMAGES and evaluateAltText / generateFeedbackHTML are
      // loaded from scripts/alt-text-data.js and scripts/alt-text-engine.js

      let currentImageIndex = 0;
      /** Per-image results: { [index]: resultObject } */
      const imageResults = {};

      // ‚îÄ‚îÄ DOM refs ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      const $img = document.getElementById("practice-image");
      const $context = document.getElementById("image-context");
      const $input = document.getElementById("alt-input");
      const $feedback = document.getElementById("alt-feedback");
      const $hint = document.getElementById("alt-hint");
      const $modelBox = document.getElementById("alt-model-answer");
      const $modelList = document.getElementById("alt-model-list");
      const $badge = document.getElementById("alt-type-badge");
      const $counter = document.getElementById("image-counter");
      const $progress = document.getElementById("alt-progress");
      const $summary = document.getElementById("alt-summary");
      const btnCheck = document.getElementById("btn-check");
      const btnHint = document.getElementById("btn-hint");
      const btnReveal = document.getElementById("btn-reveal");
      const btnRetry = document.getElementById("btn-retry");
      const btnPrev = document.getElementById("prev-image");
      const btnNext = document.getElementById("next-image");

      // ‚îÄ‚îÄ Progress dots ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      function renderProgress() {
        let html = "";
        ALT_TEXT_IMAGES.forEach((_, i) => {
          const cls =
            i === currentImageIndex
              ? "active"
              : imageResults[i]
                ? "completed"
                : "";
          const label = imageResults[i]
            ? `Image ${i + 1}: ${imageResults[i].rating}`
            : `Image ${i + 1}: not attempted`;
          html +=
            `<span class="alt-progress-dot ${cls}" ` +
            `aria-label="${label}" title="${label}"></span>`;
        });
        const done = Object.keys(imageResults).length;
        html += `<span class="alt-progress-label">${done} of ${ALT_TEXT_IMAGES.length} completed</span>`;
        $progress.innerHTML = html;
      }

      // ‚îÄ‚îÄ Load image by index ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      function loadImage(index) {
        const data = ALT_TEXT_IMAGES[index];

        // Type badge
        $badge.textContent = data.title;
        $badge.className = "alt-type-badge " + data.imageType;

        // Context
        $context.innerHTML = "<strong>Context:</strong> " + data.context;

        // Image ‚Äî use real file if available, otherwise SVG placeholder
        if (data.src) {
          $img.src = data.src;
          // Accessibility: set a generic alt so it doesn't reveal the answer
          $img.alt =
            "Practice image " +
            (index + 1) +
            " of " +
            ALT_TEXT_IMAGES.length +
            " (" +
            data.title +
            ")";
        } else {
          $img.src =
            "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' " +
            "width='400' height='250' viewBox='0 0 400 250'%3E" +
            "%3Crect fill='%23e3f2fd' width='400' height='250'/%3E" +
            "%3Ctext x='200' y='120' text-anchor='middle' fill='%231565c0' " +
            "font-size='14' font-family='Arial'%3E" +
            encodeURIComponent(data.placeholderLabel) +
            "%3C/text%3E%3C/svg%3E";
          $img.alt =
            "Practice image " + (index + 1) + " of " + ALT_TEXT_IMAGES.length;
        }

        // Photo credit (small text below image)
        var $credit = document.getElementById("image-credit");
        if (!$credit) {
          $credit = document.createElement("p");
          $credit.id = "image-credit";
          $credit.style.cssText =
            "font-size:0.8rem;color:#777;text-align:center;margin:-0.5rem 0 0.5rem;";
          $img.parentNode.insertBefore($credit, $img.nextSibling);
        }
        $credit.textContent = data.credit || "";

        // Counter
        $counter.textContent =
          "Image " + (index + 1) + " of " + ALT_TEXT_IMAGES.length;

        // Reset interactive state
        $input.value = "";
        $feedback.hidden = true;
        $feedback.className = "alt-text-feedback";
        $hint.hidden = true;
        $modelBox.hidden = true;
        btnReveal.style.display = "none";
        btnRetry.style.display = "none";

        // Navigation
        btnPrev.disabled = index === 0;
        btnNext.disabled = index === ALT_TEXT_IMAGES.length - 1;

        // If this image was already evaluated, restore result
        if (imageResults[index]) {
          restoreResult(index);
        }

        renderProgress();

        // Focus the textarea for keyboard users
        $input.focus();
      }

      /** Re-display a stored result without re-evaluating */
      function restoreResult(index) {
        const result = imageResults[index];
        const data = ALT_TEXT_IMAGES[index];
        $feedback.innerHTML = generateFeedbackHTML(result, data);
        $feedback.className = "alt-text-feedback " + result.ratingClass;
        $feedback.hidden = false;
        btnReveal.style.display = "";
        btnRetry.style.display = "";
      }

      // ‚îÄ‚îÄ Check button ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      btnCheck.addEventListener("click", function () {
        const data = ALT_TEXT_IMAGES[currentImageIndex];
        const userText = $input.value;

        // For decorative images, an empty string IS the answer, so don't
        // block on empty unless non-decorative.
        if (data.imageType !== "decorative" && userText.trim() === "") {
          $feedback.innerHTML =
            '<span aria-hidden="true">‚ùå</span> ' +
            "Please enter alt text. This is not a decorative image ‚Äî " +
            "it needs a description.";
          $feedback.className = "alt-text-feedback insufficient";
          $feedback.hidden = false;
          return;
        }

        const result = evaluateAltText(userText, data);
        imageResults[currentImageIndex] = result;

        $feedback.innerHTML = generateFeedbackHTML(result, data);
        $feedback.className = "alt-text-feedback " + result.ratingClass;
        $feedback.hidden = false;
        btnReveal.style.display = "";
        btnRetry.style.display = "";

        renderProgress();
        maybeShowSummary();
      });

      // ‚îÄ‚îÄ Hint button ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      btnHint.addEventListener("click", function () {
        const data = ALT_TEXT_IMAGES[currentImageIndex];
        if ($hint.hidden) {
          let html =
            "<strong>Hints for this image type " +
            "(<em>" +
            data.title +
            '</em>):</strong><ul style="margin:0.4rem 0 0 1.2rem;">';
          data.hints.forEach(function (h) {
            html += "<li>" + h + "</li>";
          });
          html += "</ul>";
          $hint.innerHTML = html;
          $hint.hidden = false;
          btnHint.textContent = "Hide hints";
        } else {
          $hint.hidden = true;
          btnHint.textContent = "Need a hint?";
        }
      });

      // ‚îÄ‚îÄ Reveal model answer ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      btnReveal.addEventListener("click", function () {
        const data = ALT_TEXT_IMAGES[currentImageIndex];
        if ($modelBox.hidden) {
          let items = "";
          data.modelAnswers.forEach(function (a) {
            const display = a === "" ? '<code>alt=""</code> (empty)' : a;
            items += "<li>" + display + "</li>";
          });
          $modelList.innerHTML = items;
          $modelBox.hidden = false;
          btnReveal.textContent = "Hide model answer";
        } else {
          $modelBox.hidden = true;
          btnReveal.textContent = "Show model answer";
        }
      });

      // ‚îÄ‚îÄ Try again ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      btnRetry.addEventListener("click", function () {
        $input.value = "";
        $feedback.hidden = true;
        $hint.hidden = true;
        $modelBox.hidden = true;
        btnReveal.style.display = "none";
        btnRetry.style.display = "none";
        btnHint.textContent = "Need a hint?";
        btnReveal.textContent = "Show model answer";
        delete imageResults[currentImageIndex];
        renderProgress();
        $summary.hidden = true;
        $input.focus();
      });

      // ‚îÄ‚îÄ Navigation ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      btnPrev.addEventListener("click", function () {
        if (currentImageIndex > 0) {
          currentImageIndex--;
          loadImage(currentImageIndex);
        }
      });
      btnNext.addEventListener("click", function () {
        if (currentImageIndex < ALT_TEXT_IMAGES.length - 1) {
          currentImageIndex++;
          loadImage(currentImageIndex);
        }
      });

      // ‚îÄ‚îÄ Summary after all 5 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      function maybeShowSummary() {
        if (Object.keys(imageResults).length < ALT_TEXT_IMAGES.length) return;

        const scores = Object.values(imageResults).map(function (r) {
          return r.score;
        });
        const avg =
          scores.reduce(function (a, b) {
            return a + b;
          }, 0) / scores.length;
        const avgPct = Math.round(avg * 100);

        let cls = "";
        if (avg >= 0.7)
          cls = ""; // green (default)
        else if (avg >= 0.4)
          cls = "mixed"; // amber
        else cls = "poor"; // red

        let html = "<h4>All 5 images completed!</h4>";
        html += "<p><strong>Overall score: " + avgPct + "%</strong></p>";
        html += "<ul>";
        ALT_TEXT_IMAGES.forEach(function (data, i) {
          const r = imageResults[i];
          html +=
            "<li><strong>" +
            data.title +
            ":</strong> " +
            r.rating +
            " (" +
            Math.round(r.score * 100) +
            "%)</li>";
        });
        html += "</ul>";

        // Common-mistakes recap
        const allMessages = [];
        Object.values(imageResults).forEach(function (r) {
          r.messages.forEach(function (m) {
            if (m.type === "error" || m.type === "warning")
              allMessages.push(m.text);
          });
        });
        if (allMessages.length > 0) {
          html += "<p><strong>Areas to review:</strong></p><ul>";
          // Deduplicate similar messages
          const seen = new Set();
          allMessages.forEach(function (t) {
            const key = t.substring(0, 40);
            if (!seen.has(key)) {
              seen.add(key);
              html += "<li>" + t + "</li>";
            }
          });
          html += "</ul>";
        }

        html +=
          '<p style="margin-top:0.75rem;">Learn more: ' +
          '<a href="https://www.w3.org/TR/WCAG22/#non-text-content" ' +
          'target="_blank" rel="noopener">WCAG 2.2 SC 1.1.1</a> ¬∑ ' +
          '<a href="https://www.w3.org/WAI/tutorials/images/decision-tree/" ' +
          'target="_blank" rel="noopener">W3C Alt Decision Tree</a></p>';

        $summary.innerHTML = html;
        $summary.className = "alt-summary " + cls;
        $summary.hidden = false;
      }

      // ‚îÄ‚îÄ Initialise ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      loadImage(0);

      // ========== Heading Validator ==========
      function validateHeadings() {
        const input = document.getElementById("heading-input").value.trim();
        const output = document.getElementById("heading-output");
        const tree = document.getElementById("heading-tree");
        const issues = document.getElementById("heading-issues");

        if (!input) {
          output.hidden = true;
          return;
        }

        const lines = input.split("\n").filter((line) => line.trim());
        const headings = [];
        const errors = [];
        const warnings = [];

        // Parse headings
        lines.forEach((line, i) => {
          const match = line.match(/^h?(\d)\s+(.+)/i);
          if (match) {
            headings.push({
              level: parseInt(match[1]),
              text: match[2].trim(),
              line: i + 1,
            });
          }
        });

        // Build tree visualization
        let treeHtml = "";
        headings.forEach((h) => {
          const indent = "  ".repeat(h.level - 1);
          treeHtml += `${indent}H${h.level}: ${h.text}\n`;
        });
        tree.textContent = treeHtml || "No valid headings found";

        // Check for issues
        const h1Count = headings.filter((h) => h.level === 1).length;
        if (h1Count === 0) {
          errors.push("No H1 found ‚Äî every page needs exactly one H1");
        } else if (h1Count > 1) {
          errors.push(
            `Found ${h1Count} H1 headings ‚Äî there should only be one`,
          );
        }

        // Check for skipped levels
        for (let i = 1; i < headings.length; i++) {
          const prev = headings[i - 1].level;
          const curr = headings[i].level;
          if (curr > prev + 1) {
            errors.push(
              `Skipped heading level: H${prev} ‚Üí H${curr} at "${headings[i].text}"`,
            );
          }
        }

        // Check if first heading is H1
        if (headings.length > 0 && headings[0].level !== 1) {
          warnings.push("Page should start with H1, not H" + headings[0].level);
        }

        // Display issues
        let issuesHtml = "";
        errors.forEach((e) => {
          issuesHtml += `<p class="heading-error">‚ùå ${e}</p>`;
        });
        warnings.forEach((w) => {
          issuesHtml += `<p class="heading-warning">‚ö†Ô∏è ${w}</p>`;
        });
        if (errors.length === 0 && warnings.length === 0) {
          issuesHtml =
            '<p class="heading-success">‚úÖ Heading structure looks good!</p>';
        }
        issues.innerHTML = issuesHtml;

        output.hidden = false;
      }

      // Bind heading validator button (replaces inline onclick)
      const btnValidateHeadings = document.getElementById('btn-validate-headings');
      if (btnValidateHeadings) {
        btnValidateHeadings.addEventListener('click', validateHeadings);
      }

      // ========== Tool 5: Quick-Start Wizard Logic ==========
      const wizardSteps = document.querySelectorAll('.wizard-step');
      const wizardAnnounce = document.getElementById('wizard-announce');
      const wizardNeedsContainer = document.getElementById('wizard-needs-container');
      const wizardResultContent = document.getElementById('wizard-results-content');
      let wizardState = { role: null, need: null, support: null };

      const wizardNeeds = {
        staff: [
          { id: 'docs', title: 'Microsoft Word/PDF', desc: 'Creating accessible documents and exports.' },
          { id: 'email', title: 'Emails & Newsletters', desc: 'Outlook, Gmail, and marketing platforms.' },
          { id: 'events', title: 'Inclusive Events', desc: 'Planning meetings and public events.' }
        ],
        faculty: [
          { id: 'd2l', title: 'D2L Brightspace', desc: 'Course pages, quizzes, and file uploads.' },
          { id: 'syllabus', title: 'Accessible Syllabus', desc: 'Templates and structure for course docs.' },
          { id: 'media', title: 'Video & Audio', desc: 'Captions, transcripts, and Panopto.' }
        ],
        developer: [
          { id: 'web', title: 'Web Development', desc: 'HTML, ARIA, and custom components.' },
          { id: 'audit', title: 'Testing & Audits', desc: 'Using automated and manual testing tools.' },
          { id: 'mobile', title: 'Mobile Apps', desc: 'Native app accessibility (iOS/Android).' }
        ],
        student: [
          { id: 'at', title: 'Assistive Tech', desc: 'Screen readers, magnification, and dictation.' },
          { id: 'request', title: 'Getting Support', desc: 'DRC resources and accommodation info.' }
        ]
      };

      function wizardGoTo(n) {
        wizardSteps.forEach((s, i) => s.classList.toggle('active', i === n - 1));
        const titles = ["Role Selection", "Current Needs", "Support Type", "Results"];
        wizardAnnounce.textContent = "Wizard: " + titles[n-1];
      }

      function resetWizard() {
        wizardState = { role: null, need: null, support: null };
        document.querySelectorAll('.wizard-option-btn').forEach(b => b.classList.remove('selected'));
        wizardGoTo(1);
      }

      // Role Selection
      document.querySelectorAll('#wizard-step-1 .wizard-option-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          wizardState.role = btn.getAttribute('data-role');
          populateNeeds();
          wizardGoTo(2);
        });
      });

      function populateNeeds() {
        const needs = wizardNeeds[wizardState.role] || [];
        wizardNeedsContainer.innerHTML = needs.map(n => `
          <button type="button" class="wizard-option-btn" data-need="${n.id}">
            <span class="wizard-option-title">${n.title}</span>
            <span class="wizard-option-desc">${n.desc}</span>
          </button>
        `).join('');
        
        wizardNeedsContainer.querySelectorAll('.wizard-option-btn').forEach(btn => {
          btn.addEventListener('click', () => {
            wizardState.need = btn.getAttribute('data-need');
            wizardGoTo(3);
          });
        });
      }

      // Support Selection
      document.querySelectorAll('#wizard-step-3 .wizard-option-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          wizardState.support = btn.getAttribute('data-support');
          showWizardResults();
          wizardGoTo(4);
        });
      });

      function showWizardResults() {
        let html = `<p>Based on your selections (<strong>${wizardState.role}</strong> working on <strong>${wizardState.need}</strong>), here is your suggested path:</p>`;
        html += '<ul style="margin-top:1rem;">';
        
        if (wizardState.support === 'checklist') {
          html += `<li>Download the <strong>${wizardState.need} checklist</strong> from our Checklist Catalog.</li>`;
          html += '<li>Perform a 10-minute self-audit using the manual checklist.</li>';
        } else if (wizardState.support === 'basics') {
          html += `<li>Read our <strong>${wizardState.need} Fundamentals</strong> guide.</li>`;
          html += '<li>Review the "Top 5 Quick Wins" for this topic.</li>';
        } else {
          html += '<li>Try the interactive tools above (Color Contrast or Alt Text) to test your content.</li>';
        }
        
        html += `<li>Schedule a 15-minute consultation with our accessibility experts for specific help.</li>`;
        html += '</ul>';
        wizardResultContent.innerHTML = html;
      }

      // ========== Tool 6: WCAG Quiz Logic ==========
      const quizData = [
        { scenario: "A university website has body text set at 14px in dark gray (#595959) on white.", question: "What is the minimum contrast ratio required for normal body text under Level AA?", options: ["3:1", "4.5:1", "7:1", "2:1"], correct: 1, explanation: "WCAG SC 1.4.3 requires 4.5:1 for normal text (under 18pt or 14pt bold)." },
        { scenario: "A developer places a decorative background pattern image behind a hero section.", question: "What is the correct alt text for a purely decorative image?", options: ['alt="decorative"', 'alt="" (empty)', 'alt="background"', "Remove alt attribute"], correct: 1, explanation: 'Decorative images should use an empty alt attribute (alt="") so screen readers skip them.' }
      ];
      let quizCurrent = 0;
      let quizAnswers = [];
      let quizAnswered = [];
      const quizArea = document.getElementById('quiz-area');
      const quizResPanel = document.getElementById('quiz-results');
      const quizFill = document.getElementById('progress-fill');
      const quizLabel = document.getElementById('progress-label');

      function renderQuiz() {
        const q = quizData[quizCurrent];
        let html = `<div class="quiz-card"><h3>Question ${quizCurrent + 1} of ${quizData.length}</h3><p class="quiz-scenario">${q.scenario}</p><fieldset><legend>${q.question}</legend><ul class="quiz-options">`;
        q.options.forEach((opt, i) => {
          let cls = "";
          if (quizAnswered[quizCurrent]) {
            if (i === q.correct) cls = " reveal-correct";
            if (quizAnswers[quizCurrent] === i) cls += (i === q.correct ? " correct" : " incorrect");
          }
          html += `<li class="quiz-option${cls}"><label><input type="radio" name="quiz" value="${i}" ${quizAnswers[quizCurrent] === i ? 'checked' : ''} ${quizAnswered[quizCurrent] ? 'disabled' : ''}> <span>${opt}</span></label></li>`;
        });
        html += `</ul></fieldset>`;
        if (quizAnswered[quizCurrent]) {
          html += `<div class="quiz-feedback ${quizAnswers[quizCurrent] === q.correct ? 'correct' : 'incorrect'}"><strong>${quizAnswers[quizCurrent] === q.correct ? 'Correct!' : 'Incorrect'}</strong><br>${q.explanation}</div>`;
        }
        html += `<div style="margin-top:1.5rem; display:flex; gap:1rem;">`;
        if (quizCurrent > 0) html += `<button type="button" class="alt-btn-hint" onclick="quizPrev()">Previous</button>`;
        if (!quizAnswered[quizCurrent]) html += `<button type="button" class="analyze-btn" id="quiz-submit" disabled onclick="quizSubmit()">Submit</button>`;
        else if (quizCurrent < quizData.length - 1) html += `<button type="button" class="analyze-btn" onclick="quizNext()">Next</button>`;
        else html += `<button type="button" class="analyze-btn" onclick="quizFinish()">Finish</button>`;
        html += `</div></div>`;
        quizArea.innerHTML = html;
        
        const radios = quizArea.querySelectorAll('input[type="radio"]');
        radios.forEach(r => r.addEventListener('change', () => document.getElementById('quiz-submit').disabled = false));
        
        const pct = (quizAnswered.filter(a => a).length / quizData.length) * 100;
        quizFill.style.width = pct + "%";
        quizLabel.textContent = quizAnswered.filter(a => a).length + " / " + quizData.length;
      }

      function quizSubmit() {
        const sel = quizArea.querySelector('input[name="quiz"]:checked');
        quizAnswers[quizCurrent] = parseInt(sel.value);
        quizAnswered[quizCurrent] = true;
        renderQuiz();
      }
      function quizNext() { quizCurrent++; renderQuiz(); }
      function quizPrev() { quizCurrent--; renderQuiz(); }
      function quizFinish() {
        quizArea.hidden = true;
        const score = quizAnswers.filter((a, i) => a === quizData[i].correct).length;
        quizResPanel.innerHTML = `<h3>Results</h3><div class="quiz-score">${score} / ${quizData.length}</div><button type="button" class="analyze-btn" onclick="location.reload()">Reset Quiz</button>`;
        quizResPanel.hidden = false;
      }
      quizData.forEach(() => { quizAnswers.push(-1); quizAnswered.push(false); });
      renderQuiz();

      // ========== Tool 7: Keyboard Sim Logic ==========
      document.addEventListener('keydown', (e) => {
        const keyDisplay = document.getElementById('key-name');
        if (!keyDisplay) return;
        let name = e.key;
        if (name === " ") name = "Space";
        keyDisplay.textContent = name;
        
        const tasks = document.getElementById('tasks-nav');
        if (document.activeElement.getAttribute('data-task') === 'nav-about') {
          tasks.querySelectorAll('.task-check')[0].textContent = "‚óè";
          tasks.querySelectorAll('.task-check')[0].classList.add('done');
        }
        if (e.key === "Enter" && document.activeElement.getAttribute('data-task') === 'nav-services') {
          tasks.querySelectorAll('.task-check')[1].textContent = "‚óè";
          tasks.querySelectorAll('.task-check')[1].classList.add('done');
        }
      });

      // ========== Tool 8: Readability Logic ==========
      document.getElementById('btn-score-readability').addEventListener('click', () => {
        const text = document.getElementById('read-text').value;
        if (!text) return;
        const words = text.split(/\s+/).length;
        const sentences = text.split(/[.!?]+/).length;
        const grade = Math.round((words / sentences) * 0.4 + 10); // Simplified calculation for demo
        
        document.getElementById('read-stats-grid').innerHTML = `<div class="read-stat"><span class="read-stat-value">${words}</span>Words</div><div class="read-stat"><span class="read-stat-value">${sentences}</span>Sentences</div>`;
        document.getElementById('read-grade-section').innerHTML = `<p>Grade Level: <span class="read-badge hard">${grade}</span></p>`;
        document.getElementById('read-results').hidden = false;
      });
      document.getElementById('btn-clear-readability').addEventListener('click', () => {
        document.getElementById('read-text').value = "";
        document.getElementById('read-results').hidden = true;
      });

      // ========== Tool 9: Low Vision Sim Logic ==========
      const simControls = document.getElementById('sim-controls');
      const simViewport = document.getElementById('sim-viewport');
      const simTunnel = document.getElementById('sim-tunnel');
      
      simControls.querySelectorAll('input').forEach(input => {
        input.addEventListener('change', () => {
          let filters = [];
          const checkboxes = simControls.querySelectorAll('input:checked');
          checkboxes.forEach(c => {
            if (c.value === 'blur') filters.push('blur(4px)');
            if (c.value === 'contrast') filters.push('contrast(0.4)');
            if (['protanopia', 'deuteranopia'].includes(c.value)) filters.push(`url(#sim-${c.value})`);
          });
          simViewport.style.filter = filters.join(' ');
          simTunnel.classList.toggle('active', simControls.querySelector('input[value="tunnel"]').checked);
        });
      });
      simViewport.addEventListener('mousemove', (e) => {
        if (!simTunnel.classList.contains('active')) return;
        const rect = simViewport.getBoundingClientRect();
        simTunnel.style.background = `radial-gradient(circle 80px at ${e.clientX - rect.left}px ${e.clientY - rect.top}px, transparent 60%, rgba(0,0,0,0.8) 100%)`;
      });
    </script>
    <script src="scripts/feedback-widget.js" defer></script>
  </body>
</html>
